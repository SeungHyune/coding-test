# **극장 좌석**

[문제 링크](https://www.acmicpc.net/problem/2302)

### 문제

어떤 극장의 좌석은 한 줄로 되어 있으며 왼쪽부터 차례대로 1번부터 N번까지 번호가 매겨져 있다. 공연을 보러 온 사람들은 자기의 입장권에 표시되어 있는 좌석에 앉아야 한다. 예를 들어서, 입장권에 5번이 쓰여 있으면 5번 좌석에 앉아야 한다. 단, 자기의 바로 왼쪽 좌석 또는 바로 오른쪽 좌석으로는 자리를 옮길 수 있다. 예를 들어서, 7번 입장권을 가진 사람은 7번 좌석은 물론이고, 6번 좌석이나 8번 좌석에도 앉을 수 있다. 그러나 5번 좌석이나 9번 좌석에는 앉을 수 없다.

그런데 이 극장에는 “VIP 회원”들이 있다. 이 사람들은 반드시 자기 좌석에만 앉아야 하며 옆 좌석으로 자리를 옮길 수 없다.

오늘 공연은 입장권이 매진되어 1번 좌석부터 N번 좌석까지 모든 좌석이 다 팔렸다. VIP 회원들의 좌석 번호들이 주어졌을 때, 사람들이 좌석에 앉는 서로 다른 방법의 가짓수를 구하는 프로그램을 작성하시오.

예를 들어서, 그림과 같이 좌석이 9개이고, 4번 좌석과 7번 좌석이 VIP석인 경우에 <123456789>는 물론 가능한 배치이다. 또한 <213465789> 와 <132465798> 도 가능한 배치이다. 그러나 <312456789> 와 <123546789> 는 허용되지 않는 배치 방법이다.

<br/>

### 입력

첫째 줄에는 좌석의 개수 N이 입력된다. N은 1 이상 40 이하이다. 둘째 줄에는 고정석의 개수 M이 입력된다. M은 0 이상 N 이하이다. 다음 M 개의 줄에는 고정석의 번호가 작은 수부터 큰 수의 순서로 한 줄에 하나씩 입력된다.

<br/>

### 출력

주어진 조건을 만족하면서 사람들이 좌석에 앉을 수 있는 방법의 가짓수를 출력한다. 방법의 가짓수는 2,000,000,000을 넘지 않는다. (2,000,000,000 < 231-1)

<br/>

### 예제 입력

```jsx
// 예제 입력 1
9;
2;
4;
7;

// 예제 출력 1
12;
```

<br/>

### 📕 문제 포인트

1. 극장 좌석은 좌, 우로 이동이 가능합니다.
   - n개의 좌석의 경우, 경우의 수는 n-1개 경우에서 자기 자리에 앉는 경우 + n-2개 경우에서 왼쪽과 바꿔 앉는 경우로 설명할 수 있습니다. 이로 인해, 동적 프로그래밍의 점화식은 `dp[n] = dp[n-1] + dp[n-2]`로 정의됩니다.
2. VIP 좌석은 고정이므로 좌석 이동이 불가능합니다.
   - VIP 좌석은 반드시 특정한 위치에 있어야 하므로, 해당 좌석을 기준으로 좌석 배치를 나누어 계산해야 합니다.
3. 각 좌석의 경우의 수를 미리 dp를 통해 계산합니다.
   - `dp[n] = dp[n-1] + dp[n-2]` 공식을 사용하여 각 좌석 수에 대한 경우의 수를 미리 계산합니다. 이 값들은 각 구간의 경우의 수를 구하는 데 사용됩니다.
4. VIP index를 `초깃값 0`으로 놓고 VIP 좌석 전까지의 경우의 수를 구합니다.
   - `vipIdx`를 `0`으로 초기화한 후, 각 VIP 좌석까지의 경우의 수를 구합니다. 이때 현재 VIP의 인덱스를 갱신하여 다음 VIP 좌석으로 넘어갑니다.
5. 이후 VIP의 index부터 다음 VIP index까지의 범위만큼의 경우의 수를 구하고 기존 answer에 누적곱으로 계산합니다.
   - 각 VIP 사이의 좌석 수에 대해 dp 값을 곱하여 전체 경우의 수를 업데이트합니다.
6. 최종적으로 마지막 VIP 인덱스 값이 나왔다면 `dp[N - vipIdx]`를 통해 마지막 범위의 경우의 수를 answer에 누적 곱으로 계산합니다.
   - 마지막 VIP 좌석 이후 남은 좌석 수에 대한 경우의 수를 계산하여 최종 결과에 반영합니다.

### 📝 문제 풀이

```js
const fs = require("fs");
const input = fs.readFileSync("/dev/stdin").toString().trim().split("\n");

const N = Number(input[0]);
const M = Number(input[1]);
const arr = input.slice(2).map(Number);

const dp = Array.from({ length: N + 1 }, () => 1);

for (let i = 2; i <= N; i++) {
  dp[i] = dp[i - 1] + dp[i - 2];
}

let answer = 1;
let vipIdx = 0;

for (let i = 0; i < M; i++) {
  const vip = arr[i];
  answer *= dp[vip - vipIdx - 1];
  vipIdx = vip;
}

answer *= dp[N - vipIdx];

console.log(answer);
```
