# **맥주 축제**

[문제 링크](https://www.acmicpc.net/problem/17503)

### 문제

내일부터 *N*일 동안 대구광역시에서 맥주 축제가 열립니다!

이 축제에서는 무려 *K*종류의 맥주를 무료로 제공합니다.

축제 주최자는 축제에서 더 많은 참가자들이 다양한 종류의 맥주를 즐겼으면 합니다. 그래서 축제에서 참가자들은 하루에 맥주 1병만 받을 수 있고, 이전에 받았던 종류의 맥주는 다시 받을 수 없습니다.

맥주를 정말로 사랑하는 대학생 전씨는 무료 맥주 소식에 신이 났습니다. 전씨는 이 맥주 축제에 참가해 총 *N*일 동안 맥주 *N*병을 마시려 합니다.

하지만 전씨에게는 큰 고민이 있었습니다. 전씨는 맥주를 사랑하지만, 도수가 높은 맥주를 마시면 기절하는 맥주병이 있습니다. 전씨는 맥주를 마시다 기절하면 늦잠을 자 다음 날 1교시 수업에 결석해 F를 받게 될 수도 있습니다.

전씨는 고민을 해결하기 위해 천재석사 현씨과 천재박사 승씨에게 자신의 간을 강력하게 만들어달라고 부탁했습니다. 하지만 간을 강력하게 만드는 비용이 너무 비싸서, 전씨는 간을 가능한 한 조금만 강화할 계획을 세웠습니다.

우선, *K*종류의 맥주에 각각 '선호도'와 '도수 레벨'을 매겼습니다. 선호도는 전씨가 해당 맥주를 얼마나 좋아하는지를 나타내는 수치이고, 도수 레벨은 해당 맥주의 도수가 얼마나 강한지를 나타내는 수치입니다. 편의상 전씨는 선호도와 도수 레벨을 정수로 매겼습니다.

만약, 마시는 맥주의 도수 레벨이 전씨의 간 레벨보다 높으면 맥주병이 발병해 기절해버리고 맙니다.

또한, 전씨는 맥주병에 걸리지 않으면서도 자신이 좋아하는 맥주를 많이 마시고 싶어합니다. 따라서, 마시는 맥주 *N*개의 선호도 합이 *M*이상이 되게 하려 합니다.

거창한 계획을 세운 전, 현, 승 세 사람은 서로 머리를 맞대고 고민하다가, 스트레스를 받아 연구를 집어치고 맥주를 마시러 떠나버렸습니다.

이를 본 여러분은 세 사람을 대신해 조건을 만족하는 간 레벨의 최솟값을 출력하는 프로그램을 만들어 주려고 합니다.

세 사람을 도와주세요!

<br/>

### 입력

첫 번째 줄에 축제가 열리는 기간 *N* (1 ≤ *N* ≤ 200,000) 과, 채워야 하는 선호도의 합 *M* (1 ≤ *M* < 231) 과, 마실 수 있는 맥주 종류의 수 K (*N* ≤ *K* ≤ 200,000) 가 주어집니다.

다음 *K*개의 줄에는 1번부터 *K*번 맥주의 선호도 *vi* (0 ≤ *vi* ≤ 10,000) 와 도수 레벨 *ci* (1 ≤ *ci* < 231) (_vi_, *ci*는 정수) 이 공백을 사이에 두고 주어집니다.

1번부터 K번 맥주의 종류는 모두 다릅니다.

<br/>

### 출력

첫 번째 줄에 주어진 선호도의 합 *M*을 채우면서 *N*개의 맥주를 모두 마실 수 있는 간 레벨의 최솟값을 출력합니다.

만약 아무리 레벨을 올려도 조건을 만족시킬 수 없으면 첫 번째 줄에 "`-1`" 하나만 출력하고 더 이상 아무것도 출력하지 않아야 합니다.

<br/>

### 예제 입력

```jsx
// 예제 입력 1
3 9 5
2 5
4 6
3 3
4 3
1 4

// 예제 출력 1
5
```

<br/>

### 📕 문제 포인트

1. 맥주를 **반드시 `N 종류` 만큼 먹어야 하며**, 먹은 맥주의 **선호도가 `M`이상이어야 합니다.**
2. 간 레벨의 최솟값을 구해야 하기 때문에 K 종류의 맥주 중 최고 도수 레벨을 찾기 위해 도수 기준으로 오름차순 정렬하여 `[start, end]` 범위를 구했습니다.
3. 이후, `N`일 간 맥주를 마실 때 선호도가 높은 순으로 먹기 위해 내림차순 정렬했습니다.
   - 이때, 선호도가 같다면 도수가 더 낮은 게 앞으로 오도록 처리했습니다.
4. 이제 [start, end] 범위에서 임의의 간 레벨을 구한 `mid` 값으로 검사합니다.
   - 맥주를 N 일 동안 마실 수 있는지 `day` 변수를 통해 검사합니다.
   - 마신 맥주의 선호도가 `M` 이상인지 검사합니다.
5. 두 조건을 모두 통과한다면 임의의 간레벨 `mid`를 `answer`에 갱신해 준 후 이후 더 낮은 값으로 범위를 줄여 탐색하도록 합니다.
   - `end` 값을 `mid - 1`로 범위를 줄여줍니다.
6. 두 조건을 통과하지 못한다면 임의의 간레벨 `mid`를 올려서 검사해야 하기 때문에 `start` 값을 `mid + 1`로 범위를 올려줍니다.

### 📝 문제 풀이

```js
// N일 동안 N개의 맥주를 마시면서 선호도의 합 M을 채울 수 있도록 간 레벨을 강화해야한다.
// 이때, 간 레벨을 최솟값으로 강화하자 (간 레벨을 강화하는 비용이 비쌈)

// N - 축제 기간 / M - 선호도 합 / K 맥주 종료의 수
// [맥주의 선호도, 도수 레벨]

const fs = require("fs");
const input = fs.readFileSync("/dev/stdin").toString().trim().split("\n");

const [[N, M, K], ...arr] = input.map((a) => a.split(" ").map(Number));

// K종류의 맥주 중 최고 도수의 맥주를 구하기 위한 정렬
arr.sort((a, b) => a[1] - b[1]);

const maxLike = arr.at(-1)[1];
let [start, end] = [1, maxLike];

// N일 동안 선호도가 높은 순서로 맥주를 마시기 위한 정렬 (선호도가 같다면, 도수 레벨이 낮은순으로 정렬)
arr.sort((a, b) => {
  if (a[0] === b[0]) {
    return a[1] - b[1];
  }

  return b[0] - a[0];
});

let answer = -1;

while (start <= end) {
  const mid = Math.floor((start + end) / 2); // 임의의 간 레벨

  let likeCount = 0;
  let day = 0;
  for (const [like, level] of arr) {
    if (level <= mid) {
      likeCount += like;
      day++;
    }

    if (day === N) {
      break;
    }
  }

  if (likeCount >= M && day === N) {
    // mid 레벨로 맥주를 N 종류의 M 선호도 이상 마실 수 있는 경우
    // 최솟값을 구해야함
    answer = mid;
    end = mid - 1;
  } else {
    // 불가능한 경우
    start = mid + 1;
  }
}

console.log(answer);
```
